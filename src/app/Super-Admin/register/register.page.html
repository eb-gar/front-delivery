<ion-content>
  <div class="register-background">
    <div class="register-overlay"></div>

    <div class="register-container">
      <div class="register-header">
        <h1>Crear cuenta</h1>
      </div>

      <form
        [formGroup]="registerForm"
        (ngSubmit)="onSubmit()"
        class="register-form"
      >
        <!-- Email -->
        <ion-item lines="none" class="form-item">
          <ion-button slot="start" fill="clear" color="dark">
            <ion-icon slot="icon-only" name="mail-outline"></ion-icon>
          </ion-button>
          <ion-input
            label="Correo Electrónico"
            labelPlacement="floating"
            placeholder="tucorreo@ejemplo.com"
            formControlName="email"
            type="email"
            required
          >
          </ion-input>
        </ion-item>
        <ion-note
          *ngIf="registerForm.get('email')?.errors?.['email'] && registerForm.get('email')?.touched"
        >
          Ingresa un email válido
        </ion-note>

        <!-- Contraseña -->
        <ion-item lines="none" class="form-item">
          <ion-button slot="start" fill="clear" color="dark">
            <ion-icon slot="icon-only" name="key-outline"></ion-icon>
          </ion-button>

          <ion-input
            label="Contraseña"
            labelPlacement="floating"
            placeholder="Crea una contraseña"
            formControlName="password"
            [type]="showPassword ? 'text' : 'password'"
            required
          >
          </ion-input>
          <ion-button
            fill="clear"
            slot="end"
            (click)="togglePassword()"
            color="dark"
          >
             <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
          </ion-button>
        </ion-item>
        <ion-note
          *ngIf="registerForm.get('password')?.errors?.['minlength'] && registerForm.get('password')?.touched"
        >
          Mínimo 8 caracteres
        </ion-note>

        <!-- Botón de Registro -->
        <ion-button
          type="submit"
          expand="block"
          shape="round"
          [disabled]="!registerForm.valid || isLoading"
          class="register-button"
        >
          <ion-spinner *ngIf="isLoading" name="crescent"></ion-spinner>
          <span *ngIf="!isLoading">
            Registrarse
            <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
          </span>
        </ion-button>

        <!-- Enlace a Login -->
        <div class="register-footer">
          <p>
            ¿Ya tienes cuenta?
            <a href="#" (click)="goToLogin()">Inicia sesión</a>
          </p>
        </div>
      </form>
    </div>
  </div>
</ion-content>
